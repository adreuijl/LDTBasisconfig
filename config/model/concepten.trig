@prefix elmo: <http://dotwebstack.org/def/elmo#> .
@prefix elmo-rt: <http://dotwebstack.org/def/elmo/result-type/>.
@prefix elmo-ps: <http://dotwebstack.org/def/elmo/persistence-strategy/>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix config: <http://dotwebstack.org/configuration/>.
@prefix sh: <http://www.w3.org/ns/shacl#>.
@prefix dbo: <http://dbpedia.org/ontology/>.
@prefix xhtml: <http://www.w3.org/1999/xhtml/vocab#>.
@prefix http: <http://www.w3.org/2011/http#>.
@prefix dc: <http://purl.org/dc/elements/1.1/>.
@prefix skos: <http://www.w3.org/2004/02/skos/core#>.

GRAPH config:Theatre {

# ==========================
#
# Concepten Pagina
#
# ==========================    

  config:ConceptenLijst a elmo:Representation;
    elmo:pathPattern "/begrippen";
    elmo:appearance config:ConceptenLijstAppearance;
    elmo:stage config:Stage;
    elmo:contains config:Menu;
    elmo:contains config:Footer;
	elmo:contains config:ConceptenIndex;
    elmo:informationProduct config:ConceptenLijstData;
  .
  config:ConceptenLijstAppearance a elmo:TableAppearance;
    elmo:fragment [
      elmo:index 1;
      elmo:appliesTo "begrip";
      xhtml:link "begrip";
      elmo:name "begrip";
      rdfs:label "Begrip"@nl;
    ];
    elmo:fragment [ 
      elmo:index 2;
      elmo:appliesTo "definitie";
      rdfs:label "Definitie"@nl;
    ];
  .
  
  config:TermParameter a elmo:TermParameter;
    elmo:name "term"; 
	  elmo:shape [
	    sh:datatype xsd:string;
      sh:defaultValue "[0-9]";
		]
  .
  config:ConceptenLijstData a elmo:InformationProduct;
    elmo:backend config:LocalBackend;
    elmo:resultType elmo-rt:Tuple;
    elmo:optionalParameter config:TermParameter;
    elmo:query """
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
      SELECT ?begrip ?begrip_label ?definitie
      WHERE {
        GRAPH <http://data.aquo.nl/id/dataset/begrippen> {
          ?begrip a skos:Concept.
          ?begrip rdfs:label ?begrip_label.
          OPTIONAL {?begrip skos:definition ?definitie}
          FILTER regex(?begrip_label,concat("^",?term),"i")
        }
      }
      order by ?begrip_label
      limit 100
    """
  .

  config:ConceptenIndex a elmo:Representation; 
    elmo:stage config:Stage; 
    elmo:informationProduct config:ConceptenIndexData; 
    elmo:appearance config:ConceptenIndexAppearance;
   . 
   config:ConceptenIndexAppearance a elmo:IndexAppearance;
     elmo:index 2;
   . 
   
   config:ConceptenIndexData a elmo:InformationProduct;      
   elmo:backend config:LocalBackend; 
     elmo:query """ 
	 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
	 PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
	 PREFIX elmo1: <http://bp4mc2.org/elmo/def#>
     PREFIX xhtml: <http://www.w3.org/1999/xhtml/vocab#>
	   CONSTRUCT { 
         [] 	rdfs:label "0-9|a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z|toon alles";
		        rdf:value "[0-9]|a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z|";
            elmo1:name "term"
       } 
       WHERE {} 
    """; 
  . 

}