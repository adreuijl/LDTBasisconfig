GRAPH config:Theatre {

  config:ReactEditorDomeinEndpoint a elmo:Endpoint;
    elmo:pathPattern "/beheer/fase2-domein";
    elmo:stage config:Stage;
    elmo:getRepresentation config:ReactEditorDomein;
  .
  config:ReactEditorDomeinwaardeEndpoint a elmo:Endpoint;
    elmo:pathPattern "/beheer/domeintabelwaarde";
    elmo:stage config:Stage;
    elmo:getRepresentation config:ReactEditorDomeinwaarde;
  .
  config:ReactEditorNieuweDomeinwaardeEndpoint a elmo:Endpoint;
    elmo:pathPattern "/beheer/nieuwedomeintabelwaarde";
    elmo:stage config:Stage;
    elmo:getRepresentation config:ReactEditorNieuweDomeinwaarde;
  .

  config:ReactEditorDomein a elmo:Representation;
    elmo:appearance [a elmo:ReactEditorAppearance];
    elmo:stage config:Stage;
    elmo:contains config:BeheerMenu;
    elmo:contains config:Footer;
    elmo:informationProduct config:ReactEditorDomeinData;
  .
  config:ReactEditorDomeinwaarde a elmo:Representation;
    elmo:appearance [a elmo:ReactEditorAppearance];
    elmo:stage config:Stage;
    elmo:contains config:BeheerMenu;
    elmo:contains config:Footer;
    elmo:informationProduct config:ReactEditorDomeinwaardeData;
  .
  config:ReactEditorNieuweDomeinwaarde a elmo:Representation;
    elmo:appearance [a elmo:ReactEditorAppearance];
    elmo:stage config:Stage;
    elmo:contains config:BeheerMenu;
    elmo:contains config:Footer;
    elmo:informationProduct config:ReactEditorNieuweDomeinwaardeData;
  .

  config:ReactEditorDomeinData a elmo:InformationProduct;
    elmo:backend config:LocalBackend;
    elmo:requiredParameter elmo:SubjectParameter;
    elmo:query """
      PREFIX elmo: <http://bp4mc2.org/elmo/def#>
      PREFIX dct: <http://purl.org/dc/terms/>
      CONSTRUCT {
        <http://localhost:8080/editor>
          elmo:hostName "%{dotwebstack.config.host}:%{dotwebstack.config.port}";
          elmo:searchEndpoint ?searchendpoint;
          elmo:endpoint ?endpoint;
          elmo:definition ?definition
        .
      }
      WHERE {
        SELECT (concat("/beheer/domeinwaardenlijst/",?domeintabelnaam) as ?searchendpoint)
               (concat("/beheer/domeintabel?","subject=http%3A%2F%2Fstandaard.aquo.nl%2Fid%2Fdomeintabel%2F",?domeintabelnaam) as ?endpoint)
               (concat("/def/domeintabel/",?domeintabelnaam,"?format=json") as ?definition)
        WHERE {
          GRAPH <http://standaard.aquo.nl/data/domeintabellen> {
            <http://standaard.aquo.nl/id/dataset/domeintabellen> dct:hasPart ?subject.
            BIND(strafter(str(?subject),"domeintabel/") as ?domeintabelnaam)
          }
        }
      }
    """
  .
  config:ReactEditorDomeinwaardeData a elmo:InformationProduct;
    elmo:backend config:LocalBackend;
    elmo:requiredParameter elmo:SubjectParameter;
    elmo:query """
      PREFIX elmo: <http://bp4mc2.org/elmo/def#>
      PREFIX dct: <http://purl.org/dc/terms/>
      CONSTRUCT {
        <http://localhost:8080/editor>
          elmo:hostName "%{dotwebstack.config.host}:%{dotwebstack.config.port}";
          elmo:searchEndpoint ?searchendpoint;
          elmo:endpoint ?endpoint;
          elmo:definition ?definition;
          elmo:searchResult ?subject
        .
      }
      WHERE {
        SELECT (concat("/beheer/domeinwaardenlijst/",?domeintabelnaam) as ?searchendpoint)
               (concat("/beheer/domeintabel?","subject=http%3A%2F%2Fstandaard.aquo.nl%2Fid%2Fdomeintabel%2F",?domeintabelnaam) as ?endpoint)
               (concat("/def/domeintabel/",?domeintabelnaam,"?format=json") as ?definition)
        WHERE {
          GRAPH ?domeintabel {
            ?subject a ?type
            BIND(strafter(str(?type),"#") as ?domeintabelnaam)
          }
        }
      }
    """
  .
  config:ReactEditorNieuweDomeinwaardeData a elmo:InformationProduct;
    elmo:backend config:LocalBackend;
    elmo:requiredParameter elmo:SubjectParameter;
    elmo:query """
      PREFIX elmo: <http://bp4mc2.org/elmo/def#>
      PREFIX dct: <http://purl.org/dc/terms/>
      CONSTRUCT {
        <http://localhost:8080/editor>
          elmo:hostName "%{dotwebstack.config.host}:%{dotwebstack.config.port}";
          elmo:endpoint ?endpoint;
          elmo:definition ?definition;
          elmo:searchResult <http://standaard.aquo.nl/id/resource/nieuw> #Zal niet bestaan
        .
      }
      WHERE {
        SELECT (concat("/beheer/domeintabel?","subject=http%3A%2F%2Fstandaard.aquo.nl%2Fid%2Fdomeintabel%2F",?domeintabelnaam) as ?endpoint)
               (concat("/def/domeintabel/",?domeintabelnaam,"?format=json") as ?definition)
        WHERE {
          GRAPH <http://standaard.aquo.nl/data/domeintabellen> {
            <http://standaard.aquo.nl/id/dataset/domeintabellen> dct:hasPart ?subject.
            BIND(strafter(str(?subject),"domeintabel/") as ?domeintabelnaam)
          }
        }
      }
    """
  .

}
