@prefix elmo: <http://dotwebstack.org/def/elmo#> .
@prefix elmo-rt: <http://dotwebstack.org/def/elmo/result-type/>.
@prefix elmo-ps: <http://dotwebstack.org/def/elmo/persistence-strategy/>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix config: <http://dotwebstack.org/configuration/>.
@prefix sh: <http://www.w3.org/ns/shacl#>.
@prefix dbo: <http://dbpedia.org/ontology/>.
@prefix xhtml: <http://www.w3.org/1999/xhtml/vocab#>.
@prefix http: <http://www.w3.org/2011/http#>.
@prefix dc: <http://purl.org/dc/elements/1.1/>.
@prefix aquo: <http://data.aquo.nl/def/aquo#>.

GRAPH config:Theatre {

# ==========================
#
# DOMEINEN
#
# ==========================

  config:DomeinenLijst a elmo:Representation;
    elmo:pathPattern "/domeintabellen";
    elmo:appearance config:DomeinenLijstAppearance;
    elmo:stage config:Stage;
    elmo:contains config:Menu;
    elmo:contains config:Footer;
    elmo:informationProduct config:DomeinenLijstData;
  .
  config:DomeinenLijstAppearance a elmo:TableAppearance;
    elmo:fragment [
      elmo:appliesTo "domeintabel";
      xhtml:link "domeintabel";
      elmo:name "domeintabel"
    ]
  .

  config:DomeinenLijstData a elmo:InformationProduct;
    elmo:backend config:LocalBackend;
    elmo:resultType elmo-rt:Tuple;
    elmo:query """
      PREFIX dct: <http://purl.org/dc/terms/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?domeintabel ?domeintabel_label
      WHERE {
        GRAPH <http://data.aquo.nl/id/dataset/domeintabel> {
          <http://data.aquo.nl/id/dataset/domeintabel> dct:hasPart ?domeintabel.
          ?domeintabel rdfs:label ?domeintabel_label
        }
      }
    """
  .

# ==========================
#
# DOMEINTABEL en waarden
#
# ==========================

  config:Domeintabel a elmo:Representation;
    elmo:pathPattern "/domeintabel";
    elmo:appearance config:DomeintabelAppearance;
    elmo:stage config:Stage;
    elmo:contains config:Menu;
    elmo:contains config:Footer;
    elmo:informationProduct config:DomeintabelData;
  .
  config:DomeintabelAppearance a elmo:TableAppearance;
    elmo:fragment [
      elmo:appliesTo aquo:ID;
      elmo:index 1;
    ];
    elmo:fragment [
      elmo:appliesTo aquo:Omschrijving;
      elmo:index 2;
    ];
    elmo:fragment [
      elmo:appliesTo aquo:Cijfercode;
      elmo:index 3;
    ];
    elmo:fragment [
      elmo:appliesTo aquo:Groep;
      elmo:index 4;
    ];
    elmo:fragment [
      elmo:appliesTo aquo:beginDate;
      elmo:index 98;
    ];
    elmo:fragment [
      elmo:appliesTo aquo:endDate;
      elmo:index 99;
    ]
  .

  config:DomeintabelParameter a elmo:TermParameter;
    elmo:name "domeintabel";
		elmo:shape [
			sh:nodeKind sh:IRI
		]
  .
  config:DomeintabelData a elmo:InformationProduct;
    elmo:requiredParameter config:DomeintabelParameter;
    elmo:backend config:LocalBackend;
    elmo:query """
      PREFIX dct: <http://purl.org/dc/terms/>
      PREFIX aquo: <http://data.aquo.nl/def/aquo#>
      PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
      CONSTRUCT {
        ?id ?p ?o
      }
      WHERE {
        GRAPH ?domeintabel {
          ?id ?p ?o
          FILTER (?p!=rdf:type)
        }
      }
    """
  .

}