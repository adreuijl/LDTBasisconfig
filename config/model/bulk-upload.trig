@prefix elmo: <http://dotwebstack.org/def/elmo#> .
@prefix elmo-rt: <http://dotwebstack.org/def/elmo/result-type/>.
@prefix elmo-ps: <http://dotwebstack.org/def/elmo/persistence-strategy/>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix config: <http://dotwebstack.org/configuration/>.
@prefix sh: <http://www.w3.org/ns/shacl#>.
@prefix dbo: <http://dbpedia.org/ontology/>.
@prefix xhtml: <http://www.w3.org/1999/xhtml/vocab#>.
@prefix http: <http://www.w3.org/2011/http#>.
@prefix dc: <http://purl.org/dc/elements/1.1/>.

GRAPH config:Theatre {

# ==========================
#
# TRANSACTION ENDPOINTS
#
# ==========================

  config:BegrippenUploadEndpoint a elmo:Representation;
    elmo:pathPattern "/beheer/bulkupload/begrippen";
    elmo:stage config:Stage;
    elmo:transaction config:BegrippenUploadTransaction
  .

  config:BegrippenUploadTransaction a elmo:Transaction;
    elmo:sequentialFlow (
      [
        a elmo:UpdateStep;
        elmo:backend config:LocalBackend;
        elmo:query "clear graph <http://data.aquo.nl/id/dataset/begrippen>"
      ]
      [
        a elmo:PersistenceStep;
        elmo:persistenceStrategy elmo-ps:InsertIntoGraph;
        elmo:backend config:LocalBackend;
        elmo:targetGraph <http://data.aquo.nl/id/dataset/begrippen>
      ]
    )
  .

}